# Java Coding Standards
<div align="right">
  <a href="编码规范.md"><kbd>中文</kbd></a>
</div>

> Contributions are welcome! Please follow this standard to keep the codebase consistent and maintainable.

## Scope
- Applies to all Java code in this project (including tests)
- If existing code conflicts, follow this standard and align gradually

## File Header
Every `.java` file must include the following header **after package/import**:
```java
/**
 * Created by: Arthur Zhu
 * Email: zhushuai.net@gmail.com
 * Date: ${DATE} ${TIME}
 * GitHub: https://github.com/ArthurZhu1992
 *
 * Description:
 * [One short sentence describing the core responsibility]
 */
```
- `${DATE}` format: `yyyy-MM-dd` (e.g., `2026-02-05`)
- `${TIME}` format: `HH:mm` (24-hour), based on **UTC+8**
- `Description` must be concise and no more than two lines

## Naming
| Element     | Rule            | Example              |
|-------------|-----------------|----------------------|
| Class/Interface | PascalCase  | `UserRepository`     |
| Method      | camelCase       | `fetchUserData`      |
| Variable    | camelCase       | `maxRetryCount`      |
| Constant    | UPPER_SNAKE_CASE| `DEFAULT_TIMEOUT_MS` |
| Package     | lowercase dots  | `com.example.service`|

## Comments
Use clear and concise comments (Chinese preferred in this repo).

### Class/Interface Docs
- Javadoc style
- Describe responsibility, thread-safety, key constraints
- No empty docs or TODO placeholders (unless owner and date are stated)

### Method Docs
- All public/protected methods must have Javadoc
- Must include:
  - `@param` for every parameter
  - `@return` for non-void methods
  - `@throws` for checked or important unchecked exceptions
- Focus on **intent** and **contract**, not implementation

### Inline Comments
- Only for **non-obvious logic**
- Add a blank line before the comment, none after
- Do not comment out code (use Git history)

## Code Style
- **Indentation**: 4 spaces (no tabs)
- **Line width**: ≤ 120 characters
- **Braces**: K&R style
  ```java
  if (condition) {
      // ...
  }
  ```
- **Blank lines**:
  - 1 between class members
  - 1 between logical blocks
  - 2 between methods
- **Spacing**:
  - Space after keywords: `if (x)`, `for (int i = 0; ...)`
  - Space around operators: `a = b + c`

## Maintainability
1. **Single Responsibility** per class
2. **No magic values**: constants must be named
3. **Defensive programming**:
   - Validate public method parameters (e.g., `Objects.requireNonNull()`)
   - Return empty collections instead of null
4. **Resource management**: use try-with-resources or close explicitly
5. **Exception handling**:
   - Do not swallow exceptions
   - Log with context information
6. **Dependency injection**: prefer constructor injection

## Prohibited
- ❌ `System.out.println()` (use logging)
- ❌ More than 3 nested levels (if/for/while)
- ❌ Methods over 50 lines (excluding comments/blank lines)
- ❌ Duplicate code (>3 similar lines must be extracted)
- ❌ Unused imports or variables

## Collaboration
- Self-check before commit
- New code must comply; legacy code can be improved gradually
- Contributions are welcome and must follow this standard
